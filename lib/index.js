"use strict";var xt=Object.create;var V=Object.defineProperty;var Ct=Object.getOwnPropertyDescriptor;var Et=Object.getOwnPropertyNames;var At=Object.getPrototypeOf,St=Object.prototype.hasOwnProperty;var Ot=(s,e,t)=>e in s?V(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var H=(s,e)=>()=>(e||s((e={exports:{}}).exports,e),e.exports),Pt=(s,e)=>{for(var t in e)V(s,t,{get:e[t],enumerable:!0})},we=(s,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of Et(e))!St.call(s,n)&&n!==t&&V(s,n,{get:()=>e[n],enumerable:!(r=Ct(e,n))||r.enumerable});return s};var Z=(s,e,t)=>(t=s!=null?xt(At(s)):{},we(e||!s||!s.__esModule?V(t,"default",{value:s,enumerable:!0}):t,s)),Tt=s=>we(V({},"__esModule",{value:!0}),s);var _=(s,e,t)=>(Ot(s,typeof e!="symbol"?e+"":e,t),t);var Ee=H((Sr,Ce)=>{"use strict";Ce.exports=be;function be(s,e,t){s instanceof RegExp&&(s=ye(s,t)),e instanceof RegExp&&(e=ye(e,t));var r=xe(s,e,t);return r&&{start:r[0],end:r[1],pre:t.slice(0,r[0]),body:t.slice(r[0]+s.length,r[1]),post:t.slice(r[1]+e.length)}}function ye(s,e){var t=e.match(s);return t?t[0]:null}be.range=xe;function xe(s,e,t){var r,n,i,l,f,o=t.indexOf(s),a=t.indexOf(e,o+1),c=o;if(o>=0&&a>0){if(s===e)return[o,a];for(r=[],i=t.length;c>=0&&!f;)c==o?(r.push(c),o=t.indexOf(s,c+1)):r.length==1?f=[r.pop(),a]:(n=r.pop(),n<i&&(i=n,l=a),a=t.indexOf(e,c+1)),c=o<a&&o>=0?o:a;r.length&&(f=[i,l])}return f}});var Le=H((Or,ke)=>{var Ae=Ee();ke.exports=Lt;var Se="\0SLASH"+Math.random()+"\0",Oe="\0OPEN"+Math.random()+"\0",le="\0CLOSE"+Math.random()+"\0",Pe="\0COMMA"+Math.random()+"\0",Te="\0PERIOD"+Math.random()+"\0";function ce(s){return parseInt(s,10)==s?parseInt(s,10):s.charCodeAt(0)}function jt(s){return s.split("\\\\").join(Se).split("\\{").join(Oe).split("\\}").join(le).split("\\,").join(Pe).split("\\.").join(Te)}function kt(s){return s.split(Se).join("\\").split(Oe).join("{").split(le).join("}").split(Pe).join(",").split(Te).join(".")}function je(s){if(!s)return[""];var e=[],t=Ae("{","}",s);if(!t)return s.split(",");var r=t.pre,n=t.body,i=t.post,l=r.split(",");l[l.length-1]+="{"+n+"}";var f=je(i);return i.length&&(l[l.length-1]+=f.shift(),l.push.apply(l,f)),e.push.apply(e,l),e}function Lt(s){return s?(s.substr(0,2)==="{}"&&(s="\\{\\}"+s.substr(2)),K(jt(s),!0).map(kt)):[]}function _t(s){return"{"+s+"}"}function Rt(s){return/^-?0\d/.test(s)}function Mt(s,e){return s<=e}function Nt(s,e){return s>=e}function K(s,e){var t=[],r=Ae("{","}",s);if(!r)return[s];var n=r.pre,i=r.post.length?K(r.post,!1):[""];if(/\$$/.test(r.pre))for(var l=0;l<i.length;l++){var f=n+"{"+r.body+"}"+i[l];t.push(f)}else{var o=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(r.body),a=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(r.body),c=o||a,g=r.body.indexOf(",")>=0;if(!c&&!g)return r.post.match(/,.*\}/)?(s=r.pre+"{"+r.body+le+r.post,K(s)):[s];var p;if(c)p=r.body.split(/\.\./);else if(p=je(r.body),p.length===1&&(p=K(p[0],!1).map(_t),p.length===1))return i.map(function(j){return r.pre+p[0]+j});var u;if(c){var y=ce(p[0]),m=ce(p[1]),E=Math.max(p[0].length,p[1].length),b=p.length==3?Math.abs(ce(p[2])):1,O=Mt,M=m<y;M&&(b*=-1,O=Nt);var S=p.some(Rt);u=[];for(var P=y;O(P,m);P+=b){var k;if(a)k=String.fromCharCode(P),k==="\\"&&(k="");else if(k=String(P),S){var $=E-k.length;if($>0){var L=new Array($+1).join("0");P<0?k="-"+L+k.slice(1):k=L+k}}u.push(k)}}else{u=[];for(var N=0;N<p.length;N++)u.push.apply(u,K(p[N],!1))}for(var N=0;N<u.length;N++)for(var l=0;l<i.length;l++){var f=n+u[N]+i[l];(!e||c||f)&&t.push(f)}}return t}});var Xe=H((Dr,Ze)=>{Ze.exports=He;He.sync=gr;var ze=require("fs");function pr(s,e){var t=e.pathExt!==void 0?e.pathExt:process.env.PATHEXT;if(!t||(t=t.split(";"),t.indexOf("")!==-1))return!0;for(var r=0;r<t.length;r++){var n=t[r].toLowerCase();if(n&&s.substr(-n.length).toLowerCase()===n)return!0}return!1}function Ge(s,e,t){return!s.isSymbolicLink()&&!s.isFile()?!1:pr(e,t)}function He(s,e,t){ze.stat(s,function(r,n){t(r,r?!1:Ge(n,s,e))})}function gr(s,e){return Ge(ze.statSync(s),s,e)}});var Ye=H((Ir,Qe)=>{Qe.exports=Ve;Ve.sync=dr;var Je=require("fs");function Ve(s,e,t){Je.stat(s,function(r,n){t(r,r?!1:Ke(n,e))})}function dr(s,e){return Ke(Je.statSync(s),e)}function Ke(s,e){return s.isFile()&&mr(s,e)}function mr(s,e){var t=s.mode,r=s.uid,n=s.gid,i=e.uid!==void 0?e.uid:process.getuid&&process.getuid(),l=e.gid!==void 0?e.gid:process.getgid&&process.getgid(),f=parseInt("100",8),o=parseInt("010",8),a=parseInt("001",8),c=f|o,g=t&a||t&o&&n===l||t&f&&r===i||t&c&&i===0;return g}});var tt=H((qr,et)=>{var Fr=require("fs"),ne;process.platform==="win32"||global.TESTING_WINDOWS?ne=Xe():ne=Ye();et.exports=de;de.sync=vr;function de(s,e,t){if(typeof e=="function"&&(t=e,e={}),!t){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(r,n){de(s,e||{},function(i,l){i?n(i):r(l)})})}ne(s,e||{},function(r,n){r&&(r.code==="EACCES"||e&&e.ignoreErrors)&&(r=null,n=!1),t(r,n)})}function vr(s,e){try{return ne.sync(s,e||{})}catch(t){if(e&&e.ignoreErrors||t.code==="EACCES")return!1;throw t}}});var ft=H((Br,ut)=>{var it=tt(),{join:wr,delimiter:yr,sep:rt,posix:st}=require("path"),nt=process.platform==="win32",ot=new RegExp(`[${st.sep}${rt===st.sep?"":rt}]`.replace(/(\\)/g,"\\$1")),br=new RegExp(`^\\.${ot.source}`),at=s=>Object.assign(new Error(`not found: ${s}`),{code:"ENOENT"}),ct=(s,{path:e=process.env.PATH,pathExt:t=process.env.PATHEXT,delimiter:r=yr})=>{let n=s.match(ot)?[""]:[...nt?[process.cwd()]:[],...(e||"").split(r)];if(nt){let i=t||[".EXE",".CMD",".BAT",".COM"].join(r),l=i.split(r);return s.includes(".")&&l[0]!==""&&l.unshift(""),{pathEnv:n,pathExt:l,pathExtExe:i}}return{pathEnv:n,pathExt:[""]}},lt=(s,e)=>{let t=/^".*"$/.test(s)?s.slice(1,-1):s;return(!t&&br.test(e)?e.slice(0,2):"")+wr(t,e)},ht=async(s,e={})=>{let{pathEnv:t,pathExt:r,pathExtExe:n}=ct(s,e),i=[];for(let l of t){let f=lt(l,s);for(let o of r){let a=f+o;if(await it(a,{pathExt:n,ignoreErrors:!0})){if(!e.all)return a;i.push(a)}}}if(e.all&&i.length)return i;if(e.nothrow)return null;throw at(s)},xr=(s,e={})=>{let{pathEnv:t,pathExt:r,pathExtExe:n}=ct(s,e),i=[];for(let l of t){let f=lt(l,s);for(let o of r){let a=f+o;if(it.sync(a,{pathExt:n,ignoreErrors:!0})){if(!e.all)return a;i.push(a)}}}if(e.all&&i.length)return i;if(e.nothrow)return null;throw at(s)};ut.exports=ht;ht.sync=xr});var Er={};Pt(Er,{activate:()=>Cr});module.exports=Tt(Er);var ae=require("coc.nvim");var wt=require("child_process"),T=require("coc.nvim"),yt=require("events"),me=Z(require("fs"));var De=Z(Le(),1);var $t={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},Q=s=>s.replace(/[[\]\\-]/g,"\\$&"),Wt=s=>s.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),_e=s=>s.join(""),Re=(s,e)=>{let t=e;if(s.charAt(t)!=="[")throw new Error("not in a brace expression");let r=[],n=[],i=t+1,l=!1,f=!1,o=!1,a=!1,c=t,g="";e:for(;i<s.length;){let m=s.charAt(i);if((m==="!"||m==="^")&&i===t+1){a=!0,i++;continue}if(m==="]"&&l&&!o){c=i+1;break}if(l=!0,m==="\\"&&!o){o=!0,i++;continue}if(m==="["&&!o){for(let[E,[b,O,M]]of Object.entries($t))if(s.startsWith(E,i)){if(g)return["$.",!1,s.length-t,!0];i+=E.length,M?n.push(b):r.push(b),f=f||O;continue e}}if(o=!1,g){m>g?r.push(Q(g)+"-"+Q(m)):m===g&&r.push(Q(m)),g="",i++;continue}if(s.startsWith("-]",i+1)){r.push(Q(m+"-")),i+=2;continue}if(s.startsWith("-",i+1)){g=m,i+=2;continue}r.push(Q(m)),i++}if(c<i)return["",!1,0,!1];if(!r.length&&!n.length)return["$.",!1,s.length-t,!0];if(n.length===0&&r.length===1&&/^\\?.$/.test(r[0])&&!a){let m=r[0].length===2?r[0].slice(-1):r[0];return[Wt(m),!1,c-t,!1]}let p="["+(a?"^":"")+_e(r)+"]",u="["+(a?"":"^")+_e(n)+"]";return[r.length&&n.length?"("+p+"|"+u+")":r.length?p:u,f,c-t,!0]};var he=(s,{windowsPathsNoEscape:e=!1}={})=>e?s.replace(/[?*()[\]]/g,"[$&]"):s.replace(/[?*()[\]\\]/g,"\\$&");var ue=(s,{windowsPathsNoEscape:e=!1}={})=>e?s.replace(/\[([^\/\\])\]/g,"$1"):s.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1");var R=(s,e,t={})=>(se(e),!t.nocomment&&e.charAt(0)==="#"?!1:new X(e,t).match(s)),ge=R,Dt=/^\*+([^+@!?\*\[\(]*)$/,It=s=>e=>!e.startsWith(".")&&e.endsWith(s),Ft=s=>e=>e.endsWith(s),qt=s=>(s=s.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(s)),Bt=s=>(s=s.toLowerCase(),e=>e.toLowerCase().endsWith(s)),Ut=/^\*+\.\*+$/,zt=s=>!s.startsWith(".")&&s.includes("."),Gt=s=>s!=="."&&s!==".."&&s.includes("."),Ht=/^\.\*+$/,Zt=s=>s!=="."&&s!==".."&&s.startsWith("."),Xt=/^\*+$/,Jt=s=>s.length!==0&&!s.startsWith("."),Vt=s=>s.length!==0&&s!=="."&&s!=="..",Kt=/^\?+([^+@!?\*\[\(]*)?$/,Qt=([s,e=""])=>{let t=Ie([s]);return e?(e=e.toLowerCase(),r=>t(r)&&r.toLowerCase().endsWith(e)):t},Yt=([s,e=""])=>{let t=Fe([s]);return e?(e=e.toLowerCase(),r=>t(r)&&r.toLowerCase().endsWith(e)):t},er=([s,e=""])=>{let t=Fe([s]);return e?r=>t(r)&&r.endsWith(e):t},tr=([s,e=""])=>{let t=Ie([s]);return e?r=>t(r)&&r.endsWith(e):t},Ie=([s])=>{let e=s.length;return t=>t.length===e&&!t.startsWith(".")},Fe=([s])=>{let e=s.length;return t=>t.length===e&&t!=="."&&t!==".."},qe=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",Me={win32:{sep:"\\"},posix:{sep:"/"}},rr=qe==="win32"?Me.win32.sep:Me.posix.sep;R.sep=rr;var D=Symbol("globstar **");R.GLOBSTAR=D;var Ne={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},pe="[^/]",fe=pe+"*?",sr="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",nr="(?:(?!(?:\\/|^)\\.).)*?",Be=s=>s.split("").reduce((e,t)=>(e[t]=!0,e),{}),ir=Be("().*{}+?[]^$\\!"),or=Be("[.("),ar=(s,e={})=>t=>R(t,s,e);R.filter=ar;var q=(s,e={})=>Object.assign({},s,e),cr=s=>{if(!s||typeof s!="object"||!Object.keys(s).length)return R;let e=R;return Object.assign((r,n,i={})=>e(r,n,q(s,i)),{Minimatch:class extends e.Minimatch{constructor(n,i={}){super(n,q(s,i))}static defaults(n){return e.defaults(q(s,n)).Minimatch}},unescape:(r,n={})=>e.unescape(r,q(s,n)),escape:(r,n={})=>e.escape(r,q(s,n)),filter:(r,n={})=>e.filter(r,q(s,n)),defaults:r=>e.defaults(q(s,r)),makeRe:(r,n={})=>e.makeRe(r,q(s,n)),braceExpand:(r,n={})=>e.braceExpand(r,q(s,n)),match:(r,n,i={})=>e.match(r,n,q(s,i)),sep:e.sep,GLOBSTAR:D})};R.defaults=cr;var Ue=(s,e={})=>(se(s),e.nobrace||!/\{(?:(?!\{).)*\}/.test(s)?[s]:(0,De.default)(s));R.braceExpand=Ue;var lr=1024*64,se=s=>{if(typeof s!="string")throw new TypeError("invalid pattern");if(s.length>lr)throw new TypeError("pattern is too long")},hr=(s,e={})=>new X(s,e).makeRe();R.makeRe=hr;var ur=(s,e,t={})=>{let r=new X(e,t);return s=s.filter(n=>r.match(n)),r.options.nonull&&!s.length&&s.push(e),s};R.match=ur;var fr=s=>s.replace(/\\(.)/g,"$1"),$e=/[?*]|[+@!]\(.*?\)|\[|\]/,We=s=>s.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),X=class{constructor(e,t={}){_(this,"options");_(this,"set");_(this,"pattern");_(this,"windowsPathsNoEscape");_(this,"nonegate");_(this,"negate");_(this,"comment");_(this,"empty");_(this,"preserveMultipleSlashes");_(this,"partial");_(this,"globSet");_(this,"globParts");_(this,"nocase");_(this,"isWindows");_(this,"platform");_(this,"windowsNoMagicRoot");_(this,"regexp");se(e),t=t||{},this.options=t,this.pattern=e,this.platform=t.platform||qe,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!t.windowsPathsNoEscape||t.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!t.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!t.nonegate,this.comment=!1,this.empty=!1,this.partial=!!t.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=t.windowsNoMagicRoot!==void 0?t.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let e of this.set)for(let t of e)if(typeof t!="string")return!0;return!1}debug(...e){}make(){let e=this.pattern,t=this.options;if(!t.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],t.debug&&(this.debug=(...i)=>console.error(...i)),this.debug(this.pattern,this.globSet);let r=this.globSet.map(i=>this.slashSplit(i));this.globParts=this.preprocess(r),this.debug(this.pattern,this.globParts);let n=this.globParts.map((i,l,f)=>{if(this.isWindows&&this.windowsNoMagicRoot){let o=i[0]===""&&i[1]===""&&(i[2]==="?"||!$e.test(i[2]))&&!$e.test(i[3]),a=/^[a-z]:/i.test(i[0]);if(o)return[...i.slice(0,4),...i.slice(4).map(c=>this.parse(c))];if(a)return[i[0],...i.slice(1).map(c=>this.parse(c))]}return i.map(o=>this.parse(o))});if(this.debug(this.pattern,n),this.set=n.filter(i=>i.indexOf(!1)===-1),this.isWindows)for(let i=0;i<this.set.length;i++){let l=this.set[i];l[0]===""&&l[1]===""&&this.globParts[i][2]==="?"&&typeof l[3]=="string"&&/^[a-z]:$/i.test(l[3])&&(l[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let r=0;r<e.length;r++)for(let n=0;n<e[r].length;n++)e[r][n]==="**"&&(e[r][n]="*");let{optimizationLevel:t=1}=this.options;return t>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):t>=1?e=this.levelOneOptimize(e):e=this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(t=>{let r=-1;for(;(r=t.indexOf("**",r+1))!==-1;){let n=r;for(;t[n+1]==="**";)n++;n!==r&&t.splice(r,n-r)}return t})}levelOneOptimize(e){return e.map(t=>(t=t.reduce((r,n)=>{let i=r[r.length-1];return n==="**"&&i==="**"?r:n===".."&&i&&i!==".."&&i!=="."&&i!=="**"?(r.pop(),r):(r.push(n),r)},[]),t.length===0?[""]:t))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let t=!1;do{if(t=!1,!this.preserveMultipleSlashes){for(let n=1;n<e.length-1;n++){let i=e[n];n===1&&i===""&&e[0]===""||(i==="."||i==="")&&(t=!0,e.splice(n,1),n--)}e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")&&(t=!0,e.pop())}let r=0;for(;(r=e.indexOf("..",r+1))!==-1;){let n=e[r-1];n&&n!=="."&&n!==".."&&n!=="**"&&(t=!0,e.splice(r-1,2),r-=2)}}while(t);return e.length===0?[""]:e}firstPhasePreProcess(e){let t=!1;do{t=!1;for(let r of e){let n=-1;for(;(n=r.indexOf("**",n+1))!==-1;){let l=n;for(;r[l+1]==="**";)l++;l>n&&r.splice(n+1,l-n);let f=r[n+1],o=r[n+2],a=r[n+3];if(f!==".."||!o||o==="."||o===".."||!a||a==="."||a==="..")continue;t=!0,r.splice(n,1);let c=r.slice(0);c[n]="**",e.push(c),n--}if(!this.preserveMultipleSlashes){for(let l=1;l<r.length-1;l++){let f=r[l];l===1&&f===""&&r[0]===""||(f==="."||f==="")&&(t=!0,r.splice(l,1),l--)}r[0]==="."&&r.length===2&&(r[1]==="."||r[1]==="")&&(t=!0,r.pop())}let i=0;for(;(i=r.indexOf("..",i+1))!==-1;){let l=r[i-1];if(l&&l!=="."&&l!==".."&&l!=="**"){t=!0;let o=i===1&&r[i+1]==="**"?["."]:[];r.splice(i-1,2,...o),r.length===0&&r.push(""),i-=2}}}}while(t);return e}secondPhasePreProcess(e){for(let t=0;t<e.length-1;t++)for(let r=t+1;r<e.length;r++){let n=this.partsMatch(e[t],e[r],!this.preserveMultipleSlashes);n&&(e[t]=n,e[r]=[])}return e.filter(t=>t.length)}partsMatch(e,t,r=!1){let n=0,i=0,l=[],f="";for(;n<e.length&&i<t.length;)if(e[n]===t[i])l.push(f==="b"?t[i]:e[n]),n++,i++;else if(r&&e[n]==="**"&&t[i]===e[n+1])l.push(e[n]),n++;else if(r&&t[i]==="**"&&e[n]===t[i+1])l.push(t[i]),i++;else if(e[n]==="*"&&t[i]&&(this.options.dot||!t[i].startsWith("."))&&t[i]!=="**"){if(f==="b")return!1;f="a",l.push(e[n]),n++,i++}else if(t[i]==="*"&&e[n]&&(this.options.dot||!e[n].startsWith("."))&&e[n]!=="**"){if(f==="a")return!1;f="b",l.push(t[i]),n++,i++}else return!1;return e.length===t.length&&l}parseNegate(){if(this.nonegate)return;let e=this.pattern,t=!1,r=0;for(let n=0;n<e.length&&e.charAt(n)==="!";n++)t=!t,r++;r&&(this.pattern=e.slice(r)),this.negate=t}matchOne(e,t,r=!1){let n=this.options;if(this.isWindows){let m=e[0]===""&&e[1]===""&&e[2]==="?"&&typeof e[3]=="string"&&/^[a-z]:$/i.test(e[3]),E=t[0]===""&&t[1]===""&&t[2]==="?"&&typeof t[3]=="string"&&/^[a-z]:$/i.test(t[3]);if(m&&E){let b=e[3],O=t[3];b.toLowerCase()===O.toLowerCase()&&(e[3]=O)}else if(E&&typeof e[0]=="string"){let b=t[3],O=e[0];b.toLowerCase()===O.toLowerCase()&&(t[3]=O,t=t.slice(3))}else if(m&&typeof t[0]=="string"){let b=e[3];b.toLowerCase()===t[0].toLowerCase()&&(t[0]=b,e=e.slice(3))}}let{optimizationLevel:i=1}=this.options;i>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var l=0,f=0,o=e.length,a=t.length;l<o&&f<a;l++,f++){this.debug("matchOne loop");var c=t[f],g=e[l];if(this.debug(t,c,g),c===!1)return!1;if(c===D){this.debug("GLOBSTAR",[t,c,g]);var p=l,u=f+1;if(u===a){for(this.debug("** at the end");l<o;l++)if(e[l]==="."||e[l]===".."||!n.dot&&e[l].charAt(0)===".")return!1;return!0}for(;p<o;){var y=e[p];if(this.debug(`
globstar while`,e,p,t,u,y),this.matchOne(e.slice(p),t.slice(u),r))return this.debug("globstar found match!",p,o,y),!0;if(y==="."||y===".."||!n.dot&&y.charAt(0)==="."){this.debug("dot detected!",e,p,t,u);break}this.debug("globstar swallow a segment, and continue"),p++}return!!(r&&(this.debug(`
>>> no match, partial?`,e,p,t,u),p===o))}let m;if(typeof c=="string"?(m=g===c,this.debug("string match",c,g,m)):(m=c.test(g),this.debug("pattern match",c,g,m)),!m)return!1}if(l===o&&f===a)return!0;if(l===o)return r;if(f===a)return l===o-1&&e[l]==="";throw new Error("wtf?")}braceExpand(){return Ue(this.pattern,this.options)}parse(e){se(e);let t=this.options;if(e==="**")return D;if(e==="")return"";let r,n=null;(r=e.match(Xt))?n=t.dot?Vt:Jt:(r=e.match(Dt))?n=(t.nocase?t.dot?Bt:qt:t.dot?Ft:It)(r[1]):(r=e.match(Kt))?n=(t.nocase?t.dot?Yt:Qt:t.dot?er:tr)(r):(r=e.match(Ut))?n=t.dot?Gt:zt:(r=e.match(Ht))&&(n=Zt);let i="",l=!1,f=!1,o=[],a=[],c=!1,g=!1,p,u=e.charAt(0)===".",y=t.dot||u,m=()=>u?"":y?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",E=S=>S.charAt(0)==="."?"":t.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",b=()=>{if(c){switch(c){case"*":i+=fe,l=!0;break;case"?":i+=pe,l=!0;break;default:i+="\\"+c;break}this.debug("clearStateChar %j %j",c,i),c=!1}};for(let S=0,P;S<e.length&&(P=e.charAt(S));S++){if(this.debug("%s	%s %s %j",e,S,i,P),f){if(P==="/")return!1;ir[P]&&(i+="\\"),i+=P,f=!1;continue}switch(P){case"/":return!1;case"\\":b(),f=!0;continue;case"?":case"*":case"+":case"@":case"!":this.debug("%s	%s %s %j <-- stateChar",e,S,i,P),this.debug("call clearStateChar %j",c),b(),c=P,t.noext&&b();continue;case"(":{if(!c){i+="\\(";continue}let j={type:c,start:S-1,reStart:i.length,open:Ne[c].open,close:Ne[c].close};this.debug(this.pattern,"	",j),o.push(j),i+=j.open,j.start===0&&j.type!=="!"&&(u=!0,i+=E(e.slice(S+1))),this.debug("plType %j %j",c,i),c=!1;continue}case")":{let j=o[o.length-1];if(!j){i+="\\)";continue}o.pop(),b(),l=!0,p=j,i+=p.close,p.type==="!"&&a.push(Object.assign(p,{reEnd:i.length}));continue}case"|":{let j=o[o.length-1];if(!j){i+="\\|";continue}b(),i+="|",j.start===0&&j.type!=="!"&&(u=!0,i+=E(e.slice(S+1)));continue}case"[":b();let[k,$,L,N]=Re(e,S);L?(i+=k,g=g||$,S+=L-1,l=l||N):i+="\\[";continue;case"]":i+="\\"+P;continue;default:b(),i+=We(P);break}}for(p=o.pop();p;p=o.pop()){let S;S=i.slice(p.reStart+p.open.length),this.debug(this.pattern,"setting tail",i,p),S=S.replace(/((?:\\{2}){0,64})(\\?)\|/g,(k,$,L)=>(L||(L="\\"),$+$+L+"|")),this.debug(`tail=%j
   %s`,S,S,p,i);let P=p.type==="*"?fe:p.type==="?"?pe:"\\"+p.type;l=!0,i=i.slice(0,p.reStart)+P+"\\("+S}b(),f&&(i+="\\\\");let O=or[i.charAt(0)];for(let S=a.length-1;S>-1;S--){let P=a[S],k=i.slice(0,P.reStart),$=i.slice(P.reStart,P.reEnd-8),L=i.slice(P.reEnd),N=i.slice(P.reEnd-8,P.reEnd)+L,j=k.split(")").length,J=k.split("(").length-j,z=L;for(let I=0;I<J;I++)z=z.replace(/\)[+*?]?/,"");L=z;let ee=L===""?"(?:$|\\/)":"";i=k+$+L+ee+N}if(i!==""&&l&&(i="(?=.)"+i),O&&(i=m()+i),t.nocase&&!l&&!t.nocaseMagicOnly&&(l=e.toUpperCase()!==e.toLowerCase()),!l)return fr(i);let M=(t.nocase?"i":"")+(g?"u":"");try{let S=n?{_glob:e,_src:i,test:n}:{_glob:e,_src:i};return Object.assign(new RegExp("^"+i+"$",M),S)}catch(S){return this.debug("invalid regexp",S),new RegExp("$.")}}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let t=this.options,r=t.noglobstar?fe:t.dot?sr:nr,n=t.nocase?"i":"",i=e.map(l=>{let f=l.map(o=>typeof o=="string"?We(o):o===D?D:o._src);return f.forEach((o,a)=>{let c=f[a+1],g=f[a-1];o!==D||g===D||(g===void 0?c!==void 0&&c!==D?f[a+1]="(?:\\/|"+r+"\\/)?"+c:f[a]=r:c===void 0?f[a-1]=g+"(?:\\/|"+r+")?":c!==D&&(f[a-1]=g+"(?:\\/|\\/"+r+"\\/)"+c,f[a+1]=D))}),f.filter(o=>o!==D).join("/")}).join("|");i="^(?:"+i+")$",this.negate&&(i="^(?!"+i+").*$");try{this.regexp=new RegExp(i,n)}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,t=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&t)return!0;let r=this.options;this.isWindows&&(e=e.split("\\").join("/"));let n=this.slashSplit(e);this.debug(this.pattern,"split",n);let i=this.set;this.debug(this.pattern,"set",i);let l=n[n.length-1];if(!l)for(let f=n.length-2;!l&&f>=0;f--)l=n[f];for(let f=0;f<i.length;f++){let o=i[f],a=n;if(r.matchBase&&o.length===1&&(a=[l]),this.matchOne(a,o,t))return r.flipNegate?!0:!this.negate}return r.flipNegate?!1:this.negate}static defaults(e){return R.defaults(e).Minimatch}};R.Minimatch=X;R.escape=he;R.unescape=ue;var U=Z(require("path")),bt=Z(require("readline"));var pt=Z(ft()),gt=Z(require("path"));function ie(s){try{pt.default.sync(s)}catch{return!1}return!0}function dt(s){return new Promise(e=>{setTimeout(()=>{e(void 0)},s)})}function mt(s,e){return!gt.default.relative(s,e).startsWith("..")}var vt;(()=>{"use strict";var s={470:n=>{function i(o){if(typeof o!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(o))}function l(o,a){for(var c,g="",p=0,u=-1,y=0,m=0;m<=o.length;++m){if(m<o.length)c=o.charCodeAt(m);else{if(c===47)break;c=47}if(c===47){if(!(u===m-1||y===1))if(u!==m-1&&y===2){if(g.length<2||p!==2||g.charCodeAt(g.length-1)!==46||g.charCodeAt(g.length-2)!==46){if(g.length>2){var E=g.lastIndexOf("/");if(E!==g.length-1){E===-1?(g="",p=0):p=(g=g.slice(0,E)).length-1-g.lastIndexOf("/"),u=m,y=0;continue}}else if(g.length===2||g.length===1){g="",p=0,u=m,y=0;continue}}a&&(g.length>0?g+="/..":g="..",p=2)}else g.length>0?g+="/"+o.slice(u+1,m):g=o.slice(u+1,m),p=m-u-1;u=m,y=0}else c===46&&y!==-1?++y:y=-1}return g}var f={resolve:function(){for(var o,a="",c=!1,g=arguments.length-1;g>=-1&&!c;g--){var p;g>=0?p=arguments[g]:(o===void 0&&(o=process.cwd()),p=o),i(p),p.length!==0&&(a=p+"/"+a,c=p.charCodeAt(0)===47)}return a=l(a,!c),c?a.length>0?"/"+a:"/":a.length>0?a:"."},normalize:function(o){if(i(o),o.length===0)return".";var a=o.charCodeAt(0)===47,c=o.charCodeAt(o.length-1)===47;return(o=l(o,!a)).length!==0||a||(o="."),o.length>0&&c&&(o+="/"),a?"/"+o:o},isAbsolute:function(o){return i(o),o.length>0&&o.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var o,a=0;a<arguments.length;++a){var c=arguments[a];i(c),c.length>0&&(o===void 0?o=c:o+="/"+c)}return o===void 0?".":f.normalize(o)},relative:function(o,a){if(i(o),i(a),o===a||(o=f.resolve(o))===(a=f.resolve(a)))return"";for(var c=1;c<o.length&&o.charCodeAt(c)===47;++c);for(var g=o.length,p=g-c,u=1;u<a.length&&a.charCodeAt(u)===47;++u);for(var y=a.length-u,m=p<y?p:y,E=-1,b=0;b<=m;++b){if(b===m){if(y>m){if(a.charCodeAt(u+b)===47)return a.slice(u+b+1);if(b===0)return a.slice(u+b)}else p>m&&(o.charCodeAt(c+b)===47?E=b:b===0&&(E=0));break}var O=o.charCodeAt(c+b);if(O!==a.charCodeAt(u+b))break;O===47&&(E=b)}var M="";for(b=c+E+1;b<=g;++b)b!==g&&o.charCodeAt(b)!==47||(M.length===0?M+="..":M+="/..");return M.length>0?M+a.slice(u+E):(u+=E,a.charCodeAt(u)===47&&++u,a.slice(u))},_makeLong:function(o){return o},dirname:function(o){if(i(o),o.length===0)return".";for(var a=o.charCodeAt(0),c=a===47,g=-1,p=!0,u=o.length-1;u>=1;--u)if((a=o.charCodeAt(u))===47){if(!p){g=u;break}}else p=!1;return g===-1?c?"/":".":c&&g===1?"//":o.slice(0,g)},basename:function(o,a){if(a!==void 0&&typeof a!="string")throw new TypeError('"ext" argument must be a string');i(o);var c,g=0,p=-1,u=!0;if(a!==void 0&&a.length>0&&a.length<=o.length){if(a.length===o.length&&a===o)return"";var y=a.length-1,m=-1;for(c=o.length-1;c>=0;--c){var E=o.charCodeAt(c);if(E===47){if(!u){g=c+1;break}}else m===-1&&(u=!1,m=c+1),y>=0&&(E===a.charCodeAt(y)?--y==-1&&(p=c):(y=-1,p=m))}return g===p?p=m:p===-1&&(p=o.length),o.slice(g,p)}for(c=o.length-1;c>=0;--c)if(o.charCodeAt(c)===47){if(!u){g=c+1;break}}else p===-1&&(u=!1,p=c+1);return p===-1?"":o.slice(g,p)},extname:function(o){i(o);for(var a=-1,c=0,g=-1,p=!0,u=0,y=o.length-1;y>=0;--y){var m=o.charCodeAt(y);if(m!==47)g===-1&&(p=!1,g=y+1),m===46?a===-1?a=y:u!==1&&(u=1):a!==-1&&(u=-1);else if(!p){c=y+1;break}}return a===-1||g===-1||u===0||u===1&&a===g-1&&a===c+1?"":o.slice(a,g)},format:function(o){if(o===null||typeof o!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof o);return function(a,c){var g=c.dir||c.root,p=c.base||(c.name||"")+(c.ext||"");return g?g===c.root?g+p:g+"/"+p:p}(0,o)},parse:function(o){i(o);var a={root:"",dir:"",base:"",ext:"",name:""};if(o.length===0)return a;var c,g=o.charCodeAt(0),p=g===47;p?(a.root="/",c=1):c=0;for(var u=-1,y=0,m=-1,E=!0,b=o.length-1,O=0;b>=c;--b)if((g=o.charCodeAt(b))!==47)m===-1&&(E=!1,m=b+1),g===46?u===-1?u=b:O!==1&&(O=1):u!==-1&&(O=-1);else if(!E){y=b+1;break}return u===-1||m===-1||O===0||O===1&&u===m-1&&u===y+1?m!==-1&&(a.base=a.name=y===0&&p?o.slice(1,m):o.slice(y,m)):(y===0&&p?(a.name=o.slice(1,u),a.base=o.slice(1,m)):(a.name=o.slice(y,u),a.base=o.slice(y,m)),a.ext=o.slice(u,m)),y>0?a.dir=o.slice(0,y-1):p&&(a.dir="/"),a},sep:"/",delimiter:":",win32:null,posix:null};f.posix=f,n.exports=f}},e={};function t(n){var i=e[n];if(i!==void 0)return i.exports;var l=e[n]={exports:{}};return s[n](l,l.exports,t),l.exports}t.d=(n,i)=>{for(var l in i)t.o(i,l)&&!t.o(n,l)&&Object.defineProperty(n,l,{enumerable:!0,get:i[l]})},t.o=(n,i)=>Object.prototype.hasOwnProperty.call(n,i),t.r=n=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})};var r={};(()=>{var n;if(t.r(r),t.d(r,{URI:()=>E,Utils:()=>J}),typeof process=="object")n=process.platform==="win32";else if(typeof navigator=="object"){var i=navigator.userAgent;n=i.indexOf("Windows")>=0}var l,f,o=(l=function(d,h){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,w){v.__proto__=w}||function(v,w){for(var C in w)Object.prototype.hasOwnProperty.call(w,C)&&(v[C]=w[C])},l(d,h)},function(d,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function v(){this.constructor=d}l(d,h),d.prototype=h===null?Object.create(h):(v.prototype=h.prototype,new v)}),a=/^\w[\w\d+.-]*$/,c=/^\//,g=/^\/\//;function p(d,h){if(!d.scheme&&h)throw new Error('[UriError]: Scheme is missing: {scheme: "", authority: "'.concat(d.authority,'", path: "').concat(d.path,'", query: "').concat(d.query,'", fragment: "').concat(d.fragment,'"}'));if(d.scheme&&!a.test(d.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(d.path){if(d.authority){if(!c.test(d.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(g.test(d.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}var u="",y="/",m=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,E=function(){function d(h,v,w,C,A,x){x===void 0&&(x=!1),typeof h=="object"?(this.scheme=h.scheme||u,this.authority=h.authority||u,this.path=h.path||u,this.query=h.query||u,this.fragment=h.fragment||u):(this.scheme=function(F,W){return F||W?F:"file"}(h,x),this.authority=v||u,this.path=function(F,W){switch(F){case"https":case"http":case"file":W?W[0]!==y&&(W=y+W):W=y}return W}(this.scheme,w||u),this.query=C||u,this.fragment=A||u,p(this,x))}return d.isUri=function(h){return h instanceof d||!!h&&typeof h.authority=="string"&&typeof h.fragment=="string"&&typeof h.path=="string"&&typeof h.query=="string"&&typeof h.scheme=="string"&&typeof h.fsPath=="string"&&typeof h.with=="function"&&typeof h.toString=="function"},Object.defineProperty(d.prototype,"fsPath",{get:function(){return k(this,!1)},enumerable:!1,configurable:!0}),d.prototype.with=function(h){if(!h)return this;var v=h.scheme,w=h.authority,C=h.path,A=h.query,x=h.fragment;return v===void 0?v=this.scheme:v===null&&(v=u),w===void 0?w=this.authority:w===null&&(w=u),C===void 0?C=this.path:C===null&&(C=u),A===void 0?A=this.query:A===null&&(A=u),x===void 0?x=this.fragment:x===null&&(x=u),v===this.scheme&&w===this.authority&&C===this.path&&A===this.query&&x===this.fragment?this:new O(v,w,C,A,x)},d.parse=function(h,v){v===void 0&&(v=!1);var w=m.exec(h);return w?new O(w[2]||u,j(w[4]||u),j(w[5]||u),j(w[7]||u),j(w[9]||u),v):new O(u,u,u,u,u)},d.file=function(h){var v=u;if(n&&(h=h.replace(/\\/g,y)),h[0]===y&&h[1]===y){var w=h.indexOf(y,2);w===-1?(v=h.substring(2),h=y):(v=h.substring(2,w),h=h.substring(w)||y)}return new O("file",v,h,u,u)},d.from=function(h){var v=new O(h.scheme,h.authority,h.path,h.query,h.fragment);return p(v,!0),v},d.prototype.toString=function(h){return h===void 0&&(h=!1),$(this,h)},d.prototype.toJSON=function(){return this},d.revive=function(h){if(h){if(h instanceof d)return h;var v=new O(h);return v._formatted=h.external,v._fsPath=h._sep===b?h.fsPath:null,v}return h},d}(),b=n?1:void 0,O=function(d){function h(){var v=d!==null&&d.apply(this,arguments)||this;return v._formatted=null,v._fsPath=null,v}return o(h,d),Object.defineProperty(h.prototype,"fsPath",{get:function(){return this._fsPath||(this._fsPath=k(this,!1)),this._fsPath},enumerable:!1,configurable:!0}),h.prototype.toString=function(v){return v===void 0&&(v=!1),v?$(this,!0):(this._formatted||(this._formatted=$(this,!1)),this._formatted)},h.prototype.toJSON=function(){var v={$mid:1};return this._fsPath&&(v.fsPath=this._fsPath,v._sep=b),this._formatted&&(v.external=this._formatted),this.path&&(v.path=this.path),this.scheme&&(v.scheme=this.scheme),this.authority&&(v.authority=this.authority),this.query&&(v.query=this.query),this.fragment&&(v.fragment=this.fragment),v},h}(E),M=((f={})[58]="%3A",f[47]="%2F",f[63]="%3F",f[35]="%23",f[91]="%5B",f[93]="%5D",f[64]="%40",f[33]="%21",f[36]="%24",f[38]="%26",f[39]="%27",f[40]="%28",f[41]="%29",f[42]="%2A",f[43]="%2B",f[44]="%2C",f[59]="%3B",f[61]="%3D",f[32]="%20",f);function S(d,h,v){for(var w=void 0,C=-1,A=0;A<d.length;A++){var x=d.charCodeAt(A);if(x>=97&&x<=122||x>=65&&x<=90||x>=48&&x<=57||x===45||x===46||x===95||x===126||h&&x===47||v&&x===91||v&&x===93||v&&x===58)C!==-1&&(w+=encodeURIComponent(d.substring(C,A)),C=-1),w!==void 0&&(w+=d.charAt(A));else{w===void 0&&(w=d.substr(0,A));var F=M[x];F!==void 0?(C!==-1&&(w+=encodeURIComponent(d.substring(C,A)),C=-1),w+=F):C===-1&&(C=A)}}return C!==-1&&(w+=encodeURIComponent(d.substring(C))),w!==void 0?w:d}function P(d){for(var h=void 0,v=0;v<d.length;v++){var w=d.charCodeAt(v);w===35||w===63?(h===void 0&&(h=d.substr(0,v)),h+=M[w]):h!==void 0&&(h+=d[v])}return h!==void 0?h:d}function k(d,h){var v;return v=d.authority&&d.path.length>1&&d.scheme==="file"?"//".concat(d.authority).concat(d.path):d.path.charCodeAt(0)===47&&(d.path.charCodeAt(1)>=65&&d.path.charCodeAt(1)<=90||d.path.charCodeAt(1)>=97&&d.path.charCodeAt(1)<=122)&&d.path.charCodeAt(2)===58?h?d.path.substr(1):d.path[1].toLowerCase()+d.path.substr(2):d.path,n&&(v=v.replace(/\//g,"\\")),v}function $(d,h){var v=h?P:S,w="",C=d.scheme,A=d.authority,x=d.path,F=d.query,W=d.fragment;if(C&&(w+=C,w+=":"),(A||C==="file")&&(w+=y,w+=y),A){var B=A.indexOf("@");if(B!==-1){var re=A.substr(0,B);A=A.substr(B+1),(B=re.lastIndexOf(":"))===-1?w+=v(re,!1,!1):(w+=v(re.substr(0,B),!1,!1),w+=":",w+=v(re.substr(B+1),!1,!0)),w+="@"}(B=(A=A.toLowerCase()).lastIndexOf(":"))===-1?w+=v(A,!1,!0):(w+=v(A.substr(0,B),!1,!0),w+=A.substr(B))}if(x){if(x.length>=3&&x.charCodeAt(0)===47&&x.charCodeAt(2)===58)(G=x.charCodeAt(1))>=65&&G<=90&&(x="/".concat(String.fromCharCode(G+32),":").concat(x.substr(3)));else if(x.length>=2&&x.charCodeAt(1)===58){var G;(G=x.charCodeAt(0))>=65&&G<=90&&(x="".concat(String.fromCharCode(G+32),":").concat(x.substr(2)))}w+=v(x,!0,!1)}return F&&(w+="?",w+=v(F,!1,!1)),W&&(w+="#",w+=h?W:S(W,!1,!1)),w}function L(d){try{return decodeURIComponent(d)}catch{return d.length>3?d.substr(0,3)+L(d.substr(3)):d}}var N=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function j(d){return d.match(N)?d.replace(N,function(h){return L(h)}):d}var J,z=t(470),ee=function(d,h,v){if(v||arguments.length===2)for(var w,C=0,A=h.length;C<A;C++)!w&&C in h||(w||(w=Array.prototype.slice.call(h,0,C)),w[C]=h[C]);return d.concat(w||Array.prototype.slice.call(h))},I=z.posix||z,te="/";(function(d){d.joinPath=function(h){for(var v=[],w=1;w<arguments.length;w++)v[w-1]=arguments[w];return h.with({path:I.join.apply(I,ee([h.path],v,!1))})},d.resolvePath=function(h){for(var v=[],w=1;w<arguments.length;w++)v[w-1]=arguments[w];var C=h.path,A=!1;C[0]!==te&&(C=te+C,A=!0);var x=I.resolve.apply(I,ee([C],v,!1));return A&&x[0]===te&&!h.authority&&(x=x.substring(1)),h.with({path:x})},d.dirname=function(h){if(h.path.length===0||h.path===te)return h;var v=I.dirname(h.path);return v.length===1&&v.charCodeAt(0)===46&&(v=""),h.with({path:v})},d.basename=function(h){return I.basename(h.path)},d.extname=function(h){return I.extname(h.path)}})(J||(J={}))})(),vt=r})();var{URI:oe,Utils:zr}=vt;var ve=class extends yt.EventEmitter{constructor(){super(...arguments);this.processes=[]}start(t,r,n,i){let l=n.length,o=T.workspace.getConfiguration("list.source.files").get("filterByName",!1);for(let a of n){let c=(0,wt.spawn)(t,r,{cwd:a});this.processes.push(c),c.on("error",y=>{this.emit("error",y.message)});let g=bt.default.createInterface(c.stdout),p=T.Range.create(0,0,0,0),u=i.length>0;c.stderr.on("data",y=>{console.error(y.toString("utf8"))}),g.on("line",y=>{let m=y;if(m.indexOf(a)<0&&(m=U.default.join(a,y)),u&&i.some(b=>ge(m,b)))return;let E=T.Location.create(T.Uri.file(m).toString(),p);if(!o)this.emit("data",{label:y,sortText:m,location:E});else{let b=U.default.basename(m);this.emit("data",{label:`${b}	${y}`,sortText:m,filterText:b,location:E})}}),g.on("close",()=>{l=l-1,l==0&&this.emit("end")})}}dispose(){for(let t of this.processes)t.killed||t.kill()}},Y=class extends T.BasicList{constructor(t){super(t);this.name="filesMru";this.defaultAction="open";this.description="Search files with a mru list";this.detail="A files finder plugin running at hacked coc.nvim. See: https://github.com/hexh250786313/coc-list-files-mru";this.options=[{name:"-F, -folder",description:"Search files from current workspace folder instead of cwd."},{name:"-W, -workspace",description:"Search files from all workspace folders instead of cwd."}];this.promise=Promise.resolve(void 0);this.addLocationActions(),this.mru=T.workspace.createMru("mru"),this.addAction("deconste",async(r,n)=>{let i=oe.parse(r.data.uri).fsPath;await this.mru.remove(i)},{reload:!0,persist:!0}),this.addAction("clean",async()=>{await this.mru.clean()},{reload:!0,persist:!0}),this.disposables.push(T.commands.registerCommand("mru.validate",async()=>{let r=await this.mru.load();for(let n of r)me.default.existsSync(n)||await this.mru.remove(n)}));for(let r of T.workspace.documents)this.addRecentFile(r);T.workspace.onDidOpenTextDocument(async r=>{await dt(50);let n=T.workspace.getDocument(r.uri);n&&this.addRecentFile(n)},null,this.disposables),T.events.on("BufEnter",r=>{let n=T.workspace.getDocument(r);n&&this.addRecentFile(n)},null,this.disposables)}addRecentFile(t){this.promise=this.promise.then(()=>this._addRecentFile(t),()=>this._addRecentFile(t))}async _addRecentFile(t){let r=oe.parse(t.uri);if(r.scheme!=="file"||t.buftype!=""||t.uri.indexOf("NERD_tree")!==-1)return;let n=r.fsPath.split(U.default.sep);if(n.indexOf(".git")!==-1||n.length==0||await this.nvim.eval(`getwinvar(bufwinnr(${t.bufnr}), '&previewwindow')`)==1)return;let l=r.fsPath;this.config.get("source.mru.excludePatterns",[]).some(o=>ge(l,o))||await this.mru.add(l)}getArgs(t,r){return t.length?t:r}getCommand(){let t=T.workspace.getConfiguration("list.source.files"),r=t.get("command",""),n=t.get("args",[]);if(r)return{cmd:r,args:n};if(ie("rg"))return{cmd:"rg",args:this.getArgs(n,["--color","never","--files"])};if(ie("ag"))return{cmd:"ag",args:this.getArgs(n,["-f","-g",".","--nocolor"])};if(process.platform=="win32")return{cmd:"dir",args:this.getArgs(n,["/a-D","/S","/B"])};if(ie("find"))return{cmd:"find",args:this.getArgs(n,[".","-type","f"])};throw new Error("Unable to find command for files list.")}async loadItems(t){if(t.input.length>0)return this.loadFiles(t);if(t.input.length===0)return this.loadMru(t)}doHighlight(){if(T.workspace.getConfiguration("list.source.files").get("filterByName",!1)){let{nvim:n}=this;n.pauseNotification(),n.command("syntax match CocFilesFile /\\t.*$/ contained containedin=CocFilesLine",!0),n.command("highlight default link CocFilesFile Comment",!0),n.resumeNotification(!1,!0)}}async loadMru(t){let r=t.cwd,n=t.args.indexOf("-A")!==-1,i=await this.mru.load(),f=T.workspace.getConfiguration("list.source.mru").get("filterByName",!1),o=T.Range.create(0,0,0,0);return n||(i=i.filter(a=>mt(r,a))),i.map((a,c)=>{let g=oe.file(a).toString(),p=T.Location.create(g.toString(),o);if(f){let u=U.default.basename(a);return a=n?a:U.default.relative(r,a),{label:`${u}	${a}`,data:{uri:g},sortText:String.fromCharCode(c),filterText:u,location:p}}else return{label:n?a:U.default.relative(r,a),data:{uri:g},sortText:String.fromCharCode(c),location:p}})}async loadFiles(t){let{nvim:r}=this,{window:n,args:i}=t,l=this.parseArguments(i),f=this.getCommand();if(!f)return null;let o=f.args.concat(["-F","-folder","-W","-workspace"]),a=i.filter(m=>o.indexOf(m)==-1),c=[],g=[],p=[];if(l.folder)c=[T.workspace.rootPath];else if(l.workspace)c=T.workspace.workspaceFolders.map(m=>T.Uri.parse(m.uri).fsPath);else{if(a.length>0)for(let m=0;m<a.length;m++){let E=await r.call("expand",a[m]);try{me.default.lstatSync(E).isDirectory()?g.push(E):p.push(E)}catch{p.push(E)}}g.length>0?c=g:await n.valid?c=[await r.call("getcwd",n.id)]:c=[await r.call("getcwd")]}let u=new ve,y=this.getConfig().get("excludePatterns",[]);return u.start(f.cmd,f.args.concat(p),c,y),u}};async function Cr(s){let{subscriptions:e}=s;e.push(ae.listManager.registerList(new Y(ae.workspace.nvim)))}0&&(module.exports={activate});
