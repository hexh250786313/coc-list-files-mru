"use strict";var bt=Object.create;var V=Object.defineProperty;var xt=Object.getOwnPropertyDescriptor;var Ct=Object.getOwnPropertyNames;var Et=Object.getPrototypeOf,At=Object.prototype.hasOwnProperty;var St=(r,e,t)=>e in r?V(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var G=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),Ot=(r,e)=>{for(var t in e)V(r,t,{get:e[t],enumerable:!0})},de=(r,e,t,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Ct(e))!At.call(r,i)&&i!==t&&V(r,i,{get:()=>e[i],enumerable:!(s=xt(e,i))||s.enumerable});return r};var H=(r,e,t)=>(t=r!=null?bt(Et(r)):{},de(e||!r||!r.__esModule?V(t,"default",{value:r,enumerable:!0}):t,r)),Pt=r=>de(V({},"__esModule",{value:!0}),r);var M=(r,e,t)=>(St(r,typeof e!="symbol"?e+"":e,t),t);var be=G((Ar,we)=>{"use strict";we.exports=ve;function ve(r,e,t){r instanceof RegExp&&(r=me(r,t)),e instanceof RegExp&&(e=me(e,t));var s=ye(r,e,t);return s&&{start:s[0],end:s[1],pre:t.slice(0,s[0]),body:t.slice(s[0]+r.length,s[1]),post:t.slice(s[1]+e.length)}}function me(r,e){var t=e.match(r);return t?t[0]:null}ve.range=ye;function ye(r,e,t){var s,i,n,l,f,o=t.indexOf(r),a=t.indexOf(e,o+1),c=o;if(o>=0&&a>0){if(r===e)return[o,a];for(s=[],n=t.length;c>=0&&!f;)c==o?(s.push(c),o=t.indexOf(r,c+1)):s.length==1?f=[s.pop(),a]:(i=s.pop(),i<n&&(n=i,l=a),a=t.indexOf(e,c+1)),c=o<a&&o>=0?o:a;s.length&&(f=[n,l])}return f}});var Te=G((Sr,Pe)=>{var xe=be();Pe.exports=kt;var Ce="\0SLASH"+Math.random()+"\0",Ee="\0OPEN"+Math.random()+"\0",ce="\0CLOSE"+Math.random()+"\0",Ae="\0COMMA"+Math.random()+"\0",Se="\0PERIOD"+Math.random()+"\0";function ae(r){return parseInt(r,10)==r?parseInt(r,10):r.charCodeAt(0)}function Tt(r){return r.split("\\\\").join(Ce).split("\\{").join(Ee).split("\\}").join(ce).split("\\,").join(Ae).split("\\.").join(Se)}function jt(r){return r.split(Ce).join("\\").split(Ee).join("{").split(ce).join("}").split(Ae).join(",").split(Se).join(".")}function Oe(r){if(!r)return[""];var e=[],t=xe("{","}",r);if(!t)return r.split(",");var s=t.pre,i=t.body,n=t.post,l=s.split(",");l[l.length-1]+="{"+i+"}";var f=Oe(n);return n.length&&(l[l.length-1]+=f.shift(),l.push.apply(l,f)),e.push.apply(e,l),e}function kt(r){return r?(r.substr(0,2)==="{}"&&(r="\\{\\}"+r.substr(2)),K(Tt(r),!0).map(jt)):[]}function Lt(r){return"{"+r+"}"}function Mt(r){return/^-?0\d/.test(r)}function Nt(r,e){return r<=e}function _t(r,e){return r>=e}function K(r,e){var t=[],s=xe("{","}",r);if(!s)return[r];var i=s.pre,n=s.post.length?K(s.post,!1):[""];if(/\$$/.test(s.pre))for(var l=0;l<n.length;l++){var f=i+"{"+s.body+"}"+n[l];t.push(f)}else{var o=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(s.body),a=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(s.body),c=o||a,g=s.body.indexOf(",")>=0;if(!c&&!g)return s.post.match(/,.*\}/)?(r=s.pre+"{"+s.body+ce+s.post,K(r)):[r];var p;if(c)p=s.body.split(/\.\./);else if(p=Oe(s.body),p.length===1&&(p=K(p[0],!1).map(Lt),p.length===1))return n.map(function(T){return s.pre+p[0]+T});var u;if(c){var w=ae(p[0]),m=ae(p[1]),E=Math.max(p[0].length,p[1].length),b=p.length==3?Math.abs(ae(p[2])):1,O=Nt,_=m<w;_&&(b*=-1,O=_t);var S=p.some(Mt);u=[];for(var P=w;O(P,m);P+=b){var j;if(a)j=String.fromCharCode(P),j==="\\"&&(j="");else if(j=String(P),S){var R=E-j.length;if(R>0){var L=new Array(R+1).join("0");P<0?j="-"+L+j.slice(1):j=L+j}}u.push(j)}}else{u=[];for(var $=0;$<p.length;$++)u.push.apply(u,K(p[$],!1))}for(var $=0;$<u.length;$++)for(var l=0;l<n.length;l++){var f=i+u[$]+n[l];(!e||c||f)&&t.push(f)}}return t}});var He=G((Wr,Ge)=>{Ge.exports=ze;ze.sync=pr;var De=require("fs");function fr(r,e){var t=e.pathExt!==void 0?e.pathExt:process.env.PATHEXT;if(!t||(t=t.split(";"),t.indexOf("")!==-1))return!0;for(var s=0;s<t.length;s++){var i=t[s].toLowerCase();if(i&&r.substr(-i.length).toLowerCase()===i)return!0}return!1}function Fe(r,e,t){return!r.isSymbolicLink()&&!r.isFile()?!1:fr(e,t)}function ze(r,e,t){De.stat(r,function(s,i){t(s,s?!1:Fe(i,r,e))})}function pr(r,e){return Fe(De.statSync(r),r,e)}});var Ke=G((Ir,Ve)=>{Ve.exports=Xe;Xe.sync=gr;var Ze=require("fs");function Xe(r,e,t){Ze.stat(r,function(s,i){t(s,s?!1:Je(i,e))})}function gr(r,e){return Je(Ze.statSync(r),e)}function Je(r,e){return r.isFile()&&dr(r,e)}function dr(r,e){var t=r.mode,s=r.uid,i=r.gid,n=e.uid!==void 0?e.uid:process.getuid&&process.getuid(),l=e.gid!==void 0?e.gid:process.getgid&&process.getgid(),f=parseInt("100",8),o=parseInt("010",8),a=parseInt("001",8),c=f|o,g=t&a||t&o&&i===l||t&f&&s===n||t&c&&n===0;return g}});var Ye=G((Ur,Qe)=>{var qr=require("fs"),ne;process.platform==="win32"||global.TESTING_WINDOWS?ne=He():ne=Ke();Qe.exports=pe;pe.sync=mr;function pe(r,e,t){if(typeof e=="function"&&(t=e,e={}),!t){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(s,i){pe(r,e||{},function(n,l){n?i(n):s(l)})})}ne(r,e||{},function(s,i){s&&(s.code==="EACCES"||e&&e.ignoreErrors)&&(s=null,i=!1),t(s,i)})}function mr(r,e){try{return ne.sync(r,e||{})}catch(t){if(e&&e.ignoreErrors||t.code==="EACCES")return!1;throw t}}});var ht=G((Br,lt)=>{var st=Ye(),{join:vr,delimiter:yr,sep:et,posix:tt}=require("path"),rt=process.platform==="win32",nt=new RegExp(`[${tt.sep}${et===tt.sep?"":et}]`.replace(/(\\)/g,"\\$1")),wr=new RegExp(`^\\.${nt.source}`),it=r=>Object.assign(new Error(`not found: ${r}`),{code:"ENOENT"}),ot=(r,{path:e=process.env.PATH,pathExt:t=process.env.PATHEXT,delimiter:s=yr})=>{let i=r.match(nt)?[""]:[...rt?[process.cwd()]:[],...(e||"").split(s)];if(rt){let n=t||[".EXE",".CMD",".BAT",".COM"].join(s),l=n.split(s);return r.includes(".")&&l[0]!==""&&l.unshift(""),{pathEnv:i,pathExt:l,pathExtExe:n}}return{pathEnv:i,pathExt:[""]}},at=(r,e)=>{let t=/^".*"$/.test(r)?r.slice(1,-1):r;return(!t&&wr.test(e)?e.slice(0,2):"")+vr(t,e)},ct=async(r,e={})=>{let{pathEnv:t,pathExt:s,pathExtExe:i}=ot(r,e),n=[];for(let l of t){let f=at(l,r);for(let o of s){let a=f+o;if(await st(a,{pathExt:i,ignoreErrors:!0})){if(!e.all)return a;n.push(a)}}}if(e.all&&n.length)return n;if(e.nothrow)return null;throw it(r)},br=(r,e={})=>{let{pathEnv:t,pathExt:s,pathExtExe:i}=ot(r,e),n=[];for(let l of t){let f=at(l,r);for(let o of s){let a=f+o;if(st.sync(a,{pathExt:i,ignoreErrors:!0})){if(!e.all)return a;n.push(a)}}}if(e.all&&n.length)return n;if(e.nothrow)return null;throw it(r)};lt.exports=ct;ct.sync=br});var Cr={};Ot(Cr,{activate:()=>xr});module.exports=Pt(Cr);var oe=require("coc.nvim");var mt=require("child_process"),k=require("coc.nvim"),vt=require("events"),yt=H(require("fs"));var $e=H(Te(),1);var $t={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},Q=r=>r.replace(/[[\]\\-]/g,"\\$&"),Rt=r=>r.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),je=r=>r.join(""),ke=(r,e)=>{let t=e;if(r.charAt(t)!=="[")throw new Error("not in a brace expression");let s=[],i=[],n=t+1,l=!1,f=!1,o=!1,a=!1,c=t,g="";e:for(;n<r.length;){let m=r.charAt(n);if((m==="!"||m==="^")&&n===t+1){a=!0,n++;continue}if(m==="]"&&l&&!o){c=n+1;break}if(l=!0,m==="\\"&&!o){o=!0,n++;continue}if(m==="["&&!o){for(let[E,[b,O,_]]of Object.entries($t))if(r.startsWith(E,n)){if(g)return["$.",!1,r.length-t,!0];n+=E.length,_?i.push(b):s.push(b),f=f||O;continue e}}if(o=!1,g){m>g?s.push(Q(g)+"-"+Q(m)):m===g&&s.push(Q(m)),g="",n++;continue}if(r.startsWith("-]",n+1)){s.push(Q(m+"-")),n+=2;continue}if(r.startsWith("-",n+1)){g=m,n+=2;continue}s.push(Q(m)),n++}if(c<n)return["",!1,0,!1];if(!s.length&&!i.length)return["$.",!1,r.length-t,!0];if(i.length===0&&s.length===1&&/^\\?.$/.test(s[0])&&!a){let m=s[0].length===2?s[0].slice(-1):s[0];return[Rt(m),!1,c-t,!1]}let p="["+(a?"^":"")+je(s)+"]",u="["+(a?"":"^")+je(i)+"]";return[s.length&&i.length?"("+p+"|"+u+")":s.length?p:u,f,c-t,!0]};var le=(r,{windowsPathsNoEscape:e=!1}={})=>e?r.replace(/[?*()[\]]/g,"[$&]"):r.replace(/[?*()[\]\\]/g,"\\$&");var he=(r,{windowsPathsNoEscape:e=!1}={})=>e?r.replace(/\[([^\/\\])\]/g,"$1"):r.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1");var N=(r,e,t={})=>(se(e),!t.nocomment&&e.charAt(0)==="#"?!1:new Z(e,t).match(r)),Re=N,Wt=/^\*+([^+@!?\*\[\(]*)$/,It=r=>e=>!e.startsWith(".")&&e.endsWith(r),qt=r=>e=>e.endsWith(r),Ut=r=>(r=r.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(r)),Bt=r=>(r=r.toLowerCase(),e=>e.toLowerCase().endsWith(r)),Dt=/^\*+\.\*+$/,Ft=r=>!r.startsWith(".")&&r.includes("."),zt=r=>r!=="."&&r!==".."&&r.includes("."),Gt=/^\.\*+$/,Ht=r=>r!=="."&&r!==".."&&r.startsWith("."),Zt=/^\*+$/,Xt=r=>r.length!==0&&!r.startsWith("."),Jt=r=>r.length!==0&&r!=="."&&r!=="..",Vt=/^\?+([^+@!?\*\[\(]*)?$/,Kt=([r,e=""])=>{let t=We([r]);return e?(e=e.toLowerCase(),s=>t(s)&&s.toLowerCase().endsWith(e)):t},Qt=([r,e=""])=>{let t=Ie([r]);return e?(e=e.toLowerCase(),s=>t(s)&&s.toLowerCase().endsWith(e)):t},Yt=([r,e=""])=>{let t=Ie([r]);return e?s=>t(s)&&s.endsWith(e):t},er=([r,e=""])=>{let t=We([r]);return e?s=>t(s)&&s.endsWith(e):t},We=([r])=>{let e=r.length;return t=>t.length===e&&!t.startsWith(".")},Ie=([r])=>{let e=r.length;return t=>t.length===e&&t!=="."&&t!==".."},qe=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",Le={win32:{sep:"\\"},posix:{sep:"/"}},tr=qe==="win32"?Le.win32.sep:Le.posix.sep;N.sep=tr;var I=Symbol("globstar **");N.GLOBSTAR=I;var Me={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},fe="[^/]",ue=fe+"*?",rr="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",sr="(?:(?!(?:\\/|^)\\.).)*?",Ue=r=>r.split("").reduce((e,t)=>(e[t]=!0,e),{}),nr=Ue("().*{}+?[]^$\\!"),ir=Ue("[.("),or=(r,e={})=>t=>N(t,r,e);N.filter=or;var B=(r,e={})=>Object.assign({},r,e),ar=r=>{if(!r||typeof r!="object"||!Object.keys(r).length)return N;let e=N;return Object.assign((s,i,n={})=>e(s,i,B(r,n)),{Minimatch:class extends e.Minimatch{constructor(i,n={}){super(i,B(r,n))}static defaults(i){return e.defaults(B(r,i)).Minimatch}},unescape:(s,i={})=>e.unescape(s,B(r,i)),escape:(s,i={})=>e.escape(s,B(r,i)),filter:(s,i={})=>e.filter(s,B(r,i)),defaults:s=>e.defaults(B(r,s)),makeRe:(s,i={})=>e.makeRe(s,B(r,i)),braceExpand:(s,i={})=>e.braceExpand(s,B(r,i)),match:(s,i,n={})=>e.match(s,i,B(r,n)),sep:e.sep,GLOBSTAR:I})};N.defaults=ar;var Be=(r,e={})=>(se(r),e.nobrace||!/\{(?:(?!\{).)*\}/.test(r)?[r]:(0,$e.default)(r));N.braceExpand=Be;var cr=1024*64,se=r=>{if(typeof r!="string")throw new TypeError("invalid pattern");if(r.length>cr)throw new TypeError("pattern is too long")},lr=(r,e={})=>new Z(r,e).makeRe();N.makeRe=lr;var hr=(r,e,t={})=>{let s=new Z(e,t);return r=r.filter(i=>s.match(i)),s.options.nonull&&!r.length&&r.push(e),r};N.match=hr;var ur=r=>r.replace(/\\(.)/g,"$1"),Ne=/[?*]|[+@!]\(.*?\)|\[|\]/,_e=r=>r.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),Z=class{constructor(e,t={}){M(this,"options");M(this,"set");M(this,"pattern");M(this,"windowsPathsNoEscape");M(this,"nonegate");M(this,"negate");M(this,"comment");M(this,"empty");M(this,"preserveMultipleSlashes");M(this,"partial");M(this,"globSet");M(this,"globParts");M(this,"nocase");M(this,"isWindows");M(this,"platform");M(this,"windowsNoMagicRoot");M(this,"regexp");se(e),t=t||{},this.options=t,this.pattern=e,this.platform=t.platform||qe,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!t.windowsPathsNoEscape||t.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!t.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!t.nonegate,this.comment=!1,this.empty=!1,this.partial=!!t.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=t.windowsNoMagicRoot!==void 0?t.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let e of this.set)for(let t of e)if(typeof t!="string")return!0;return!1}debug(...e){}make(){let e=this.pattern,t=this.options;if(!t.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],t.debug&&(this.debug=(...n)=>console.error(...n)),this.debug(this.pattern,this.globSet);let s=this.globSet.map(n=>this.slashSplit(n));this.globParts=this.preprocess(s),this.debug(this.pattern,this.globParts);let i=this.globParts.map((n,l,f)=>{if(this.isWindows&&this.windowsNoMagicRoot){let o=n[0]===""&&n[1]===""&&(n[2]==="?"||!Ne.test(n[2]))&&!Ne.test(n[3]),a=/^[a-z]:/i.test(n[0]);if(o)return[...n.slice(0,4),...n.slice(4).map(c=>this.parse(c))];if(a)return[n[0],...n.slice(1).map(c=>this.parse(c))]}return n.map(o=>this.parse(o))});if(this.debug(this.pattern,i),this.set=i.filter(n=>n.indexOf(!1)===-1),this.isWindows)for(let n=0;n<this.set.length;n++){let l=this.set[n];l[0]===""&&l[1]===""&&this.globParts[n][2]==="?"&&typeof l[3]=="string"&&/^[a-z]:$/i.test(l[3])&&(l[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let s=0;s<e.length;s++)for(let i=0;i<e[s].length;i++)e[s][i]==="**"&&(e[s][i]="*");let{optimizationLevel:t=1}=this.options;return t>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):t>=1?e=this.levelOneOptimize(e):e=this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(t=>{let s=-1;for(;(s=t.indexOf("**",s+1))!==-1;){let i=s;for(;t[i+1]==="**";)i++;i!==s&&t.splice(s,i-s)}return t})}levelOneOptimize(e){return e.map(t=>(t=t.reduce((s,i)=>{let n=s[s.length-1];return i==="**"&&n==="**"?s:i===".."&&n&&n!==".."&&n!=="."&&n!=="**"?(s.pop(),s):(s.push(i),s)},[]),t.length===0?[""]:t))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let t=!1;do{if(t=!1,!this.preserveMultipleSlashes){for(let i=1;i<e.length-1;i++){let n=e[i];i===1&&n===""&&e[0]===""||(n==="."||n==="")&&(t=!0,e.splice(i,1),i--)}e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")&&(t=!0,e.pop())}let s=0;for(;(s=e.indexOf("..",s+1))!==-1;){let i=e[s-1];i&&i!=="."&&i!==".."&&i!=="**"&&(t=!0,e.splice(s-1,2),s-=2)}}while(t);return e.length===0?[""]:e}firstPhasePreProcess(e){let t=!1;do{t=!1;for(let s of e){let i=-1;for(;(i=s.indexOf("**",i+1))!==-1;){let l=i;for(;s[l+1]==="**";)l++;l>i&&s.splice(i+1,l-i);let f=s[i+1],o=s[i+2],a=s[i+3];if(f!==".."||!o||o==="."||o===".."||!a||a==="."||a==="..")continue;t=!0,s.splice(i,1);let c=s.slice(0);c[i]="**",e.push(c),i--}if(!this.preserveMultipleSlashes){for(let l=1;l<s.length-1;l++){let f=s[l];l===1&&f===""&&s[0]===""||(f==="."||f==="")&&(t=!0,s.splice(l,1),l--)}s[0]==="."&&s.length===2&&(s[1]==="."||s[1]==="")&&(t=!0,s.pop())}let n=0;for(;(n=s.indexOf("..",n+1))!==-1;){let l=s[n-1];if(l&&l!=="."&&l!==".."&&l!=="**"){t=!0;let o=n===1&&s[n+1]==="**"?["."]:[];s.splice(n-1,2,...o),s.length===0&&s.push(""),n-=2}}}}while(t);return e}secondPhasePreProcess(e){for(let t=0;t<e.length-1;t++)for(let s=t+1;s<e.length;s++){let i=this.partsMatch(e[t],e[s],!this.preserveMultipleSlashes);i&&(e[t]=i,e[s]=[])}return e.filter(t=>t.length)}partsMatch(e,t,s=!1){let i=0,n=0,l=[],f="";for(;i<e.length&&n<t.length;)if(e[i]===t[n])l.push(f==="b"?t[n]:e[i]),i++,n++;else if(s&&e[i]==="**"&&t[n]===e[i+1])l.push(e[i]),i++;else if(s&&t[n]==="**"&&e[i]===t[n+1])l.push(t[n]),n++;else if(e[i]==="*"&&t[n]&&(this.options.dot||!t[n].startsWith("."))&&t[n]!=="**"){if(f==="b")return!1;f="a",l.push(e[i]),i++,n++}else if(t[n]==="*"&&e[i]&&(this.options.dot||!e[i].startsWith("."))&&e[i]!=="**"){if(f==="a")return!1;f="b",l.push(t[n]),i++,n++}else return!1;return e.length===t.length&&l}parseNegate(){if(this.nonegate)return;let e=this.pattern,t=!1,s=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)t=!t,s++;s&&(this.pattern=e.slice(s)),this.negate=t}matchOne(e,t,s=!1){let i=this.options;if(this.isWindows){let m=e[0]===""&&e[1]===""&&e[2]==="?"&&typeof e[3]=="string"&&/^[a-z]:$/i.test(e[3]),E=t[0]===""&&t[1]===""&&t[2]==="?"&&typeof t[3]=="string"&&/^[a-z]:$/i.test(t[3]);if(m&&E){let b=e[3],O=t[3];b.toLowerCase()===O.toLowerCase()&&(e[3]=O)}else if(E&&typeof e[0]=="string"){let b=t[3],O=e[0];b.toLowerCase()===O.toLowerCase()&&(t[3]=O,t=t.slice(3))}else if(m&&typeof t[0]=="string"){let b=e[3];b.toLowerCase()===t[0].toLowerCase()&&(t[0]=b,e=e.slice(3))}}let{optimizationLevel:n=1}=this.options;n>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var l=0,f=0,o=e.length,a=t.length;l<o&&f<a;l++,f++){this.debug("matchOne loop");var c=t[f],g=e[l];if(this.debug(t,c,g),c===!1)return!1;if(c===I){this.debug("GLOBSTAR",[t,c,g]);var p=l,u=f+1;if(u===a){for(this.debug("** at the end");l<o;l++)if(e[l]==="."||e[l]===".."||!i.dot&&e[l].charAt(0)===".")return!1;return!0}for(;p<o;){var w=e[p];if(this.debug(`
globstar while`,e,p,t,u,w),this.matchOne(e.slice(p),t.slice(u),s))return this.debug("globstar found match!",p,o,w),!0;if(w==="."||w===".."||!i.dot&&w.charAt(0)==="."){this.debug("dot detected!",e,p,t,u);break}this.debug("globstar swallow a segment, and continue"),p++}return!!(s&&(this.debug(`
>>> no match, partial?`,e,p,t,u),p===o))}let m;if(typeof c=="string"?(m=g===c,this.debug("string match",c,g,m)):(m=c.test(g),this.debug("pattern match",c,g,m)),!m)return!1}if(l===o&&f===a)return!0;if(l===o)return s;if(f===a)return l===o-1&&e[l]==="";throw new Error("wtf?")}braceExpand(){return Be(this.pattern,this.options)}parse(e){se(e);let t=this.options;if(e==="**")return I;if(e==="")return"";let s,i=null;(s=e.match(Zt))?i=t.dot?Jt:Xt:(s=e.match(Wt))?i=(t.nocase?t.dot?Bt:Ut:t.dot?qt:It)(s[1]):(s=e.match(Vt))?i=(t.nocase?t.dot?Qt:Kt:t.dot?Yt:er)(s):(s=e.match(Dt))?i=t.dot?zt:Ft:(s=e.match(Gt))&&(i=Ht);let n="",l=!1,f=!1,o=[],a=[],c=!1,g=!1,p,u=e.charAt(0)===".",w=t.dot||u,m=()=>u?"":w?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",E=S=>S.charAt(0)==="."?"":t.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",b=()=>{if(c){switch(c){case"*":n+=ue,l=!0;break;case"?":n+=fe,l=!0;break;default:n+="\\"+c;break}this.debug("clearStateChar %j %j",c,n),c=!1}};for(let S=0,P;S<e.length&&(P=e.charAt(S));S++){if(this.debug("%s	%s %s %j",e,S,n,P),f){if(P==="/")return!1;nr[P]&&(n+="\\"),n+=P,f=!1;continue}switch(P){case"/":return!1;case"\\":b(),f=!0;continue;case"?":case"*":case"+":case"@":case"!":this.debug("%s	%s %s %j <-- stateChar",e,S,n,P),this.debug("call clearStateChar %j",c),b(),c=P,t.noext&&b();continue;case"(":{if(!c){n+="\\(";continue}let T={type:c,start:S-1,reStart:n.length,open:Me[c].open,close:Me[c].close};this.debug(this.pattern,"	",T),o.push(T),n+=T.open,T.start===0&&T.type!=="!"&&(u=!0,n+=E(e.slice(S+1))),this.debug("plType %j %j",c,n),c=!1;continue}case")":{let T=o[o.length-1];if(!T){n+="\\)";continue}o.pop(),b(),l=!0,p=T,n+=p.close,p.type==="!"&&a.push(Object.assign(p,{reEnd:n.length}));continue}case"|":{let T=o[o.length-1];if(!T){n+="\\|";continue}b(),n+="|",T.start===0&&T.type!=="!"&&(u=!0,n+=E(e.slice(S+1)));continue}case"[":b();let[j,R,L,$]=ke(e,S);L?(n+=j,g=g||R,S+=L-1,l=l||$):n+="\\[";continue;case"]":n+="\\"+P;continue;default:b(),n+=_e(P);break}}for(p=o.pop();p;p=o.pop()){let S;S=n.slice(p.reStart+p.open.length),this.debug(this.pattern,"setting tail",n,p),S=S.replace(/((?:\\{2}){0,64})(\\?)\|/g,(j,R,L)=>(L||(L="\\"),R+R+L+"|")),this.debug(`tail=%j
   %s`,S,S,p,n);let P=p.type==="*"?ue:p.type==="?"?fe:"\\"+p.type;l=!0,n=n.slice(0,p.reStart)+P+"\\("+S}b(),f&&(n+="\\\\");let O=ir[n.charAt(0)];for(let S=a.length-1;S>-1;S--){let P=a[S],j=n.slice(0,P.reStart),R=n.slice(P.reStart,P.reEnd-8),L=n.slice(P.reEnd),$=n.slice(P.reEnd-8,P.reEnd)+L,T=j.split(")").length,J=j.split("(").length-T,F=L;for(let q=0;q<J;q++)F=F.replace(/\)[+*?]?/,"");L=F;let ee=L===""?"(?:$|\\/)":"";n=j+R+L+ee+$}if(n!==""&&l&&(n="(?=.)"+n),O&&(n=m()+n),t.nocase&&!l&&!t.nocaseMagicOnly&&(l=e.toUpperCase()!==e.toLowerCase()),!l)return ur(n);let _=(t.nocase?"i":"")+(g?"u":"");try{let S=i?{_glob:e,_src:n,test:i}:{_glob:e,_src:n};return Object.assign(new RegExp("^"+n+"$",_),S)}catch(S){return this.debug("invalid regexp",S),new RegExp("$.")}}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let t=this.options,s=t.noglobstar?ue:t.dot?rr:sr,i=t.nocase?"i":"",n=e.map(l=>{let f=l.map(o=>typeof o=="string"?_e(o):o===I?I:o._src);return f.forEach((o,a)=>{let c=f[a+1],g=f[a-1];o!==I||g===I||(g===void 0?c!==void 0&&c!==I?f[a+1]="(?:\\/|"+s+"\\/)?"+c:f[a]=s:c===void 0?f[a-1]=g+"(?:\\/|"+s+")?":c!==I&&(f[a-1]=g+"(?:\\/|\\/"+s+"\\/)"+c,f[a+1]=I))}),f.filter(o=>o!==I).join("/")}).join("|");n="^(?:"+n+")$",this.negate&&(n="^(?!"+n+").*$");try{this.regexp=new RegExp(n,i)}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,t=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&t)return!0;let s=this.options;this.isWindows&&(e=e.split("\\").join("/"));let i=this.slashSplit(e);this.debug(this.pattern,"split",i);let n=this.set;this.debug(this.pattern,"set",n);let l=i[i.length-1];if(!l)for(let f=i.length-2;!l&&f>=0;f--)l=i[f];for(let f=0;f<n.length;f++){let o=n[f],a=i;if(s.matchBase&&o.length===1&&(a=[l]),this.matchOne(a,o,t))return s.flipNegate?!0:!this.negate}return s.flipNegate?!1:this.negate}static defaults(e){return N.defaults(e).Minimatch}};N.Minimatch=Z;N.escape=le;N.unescape=he;var X=H(require("path")),wt=H(require("readline"));var ut=H(ht()),ft=H(require("path"));function ie(r){try{ut.default.sync(r)}catch{return!1}return!0}function pt(r,e){return!ft.default.relative(r,e).startsWith("..")}var gt;(()=>{"use strict";var r={470:i=>{function n(o){if(typeof o!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(o))}function l(o,a){for(var c,g="",p=0,u=-1,w=0,m=0;m<=o.length;++m){if(m<o.length)c=o.charCodeAt(m);else{if(c===47)break;c=47}if(c===47){if(!(u===m-1||w===1))if(u!==m-1&&w===2){if(g.length<2||p!==2||g.charCodeAt(g.length-1)!==46||g.charCodeAt(g.length-2)!==46){if(g.length>2){var E=g.lastIndexOf("/");if(E!==g.length-1){E===-1?(g="",p=0):p=(g=g.slice(0,E)).length-1-g.lastIndexOf("/"),u=m,w=0;continue}}else if(g.length===2||g.length===1){g="",p=0,u=m,w=0;continue}}a&&(g.length>0?g+="/..":g="..",p=2)}else g.length>0?g+="/"+o.slice(u+1,m):g=o.slice(u+1,m),p=m-u-1;u=m,w=0}else c===46&&w!==-1?++w:w=-1}return g}var f={resolve:function(){for(var o,a="",c=!1,g=arguments.length-1;g>=-1&&!c;g--){var p;g>=0?p=arguments[g]:(o===void 0&&(o=process.cwd()),p=o),n(p),p.length!==0&&(a=p+"/"+a,c=p.charCodeAt(0)===47)}return a=l(a,!c),c?a.length>0?"/"+a:"/":a.length>0?a:"."},normalize:function(o){if(n(o),o.length===0)return".";var a=o.charCodeAt(0)===47,c=o.charCodeAt(o.length-1)===47;return(o=l(o,!a)).length!==0||a||(o="."),o.length>0&&c&&(o+="/"),a?"/"+o:o},isAbsolute:function(o){return n(o),o.length>0&&o.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var o,a=0;a<arguments.length;++a){var c=arguments[a];n(c),c.length>0&&(o===void 0?o=c:o+="/"+c)}return o===void 0?".":f.normalize(o)},relative:function(o,a){if(n(o),n(a),o===a||(o=f.resolve(o))===(a=f.resolve(a)))return"";for(var c=1;c<o.length&&o.charCodeAt(c)===47;++c);for(var g=o.length,p=g-c,u=1;u<a.length&&a.charCodeAt(u)===47;++u);for(var w=a.length-u,m=p<w?p:w,E=-1,b=0;b<=m;++b){if(b===m){if(w>m){if(a.charCodeAt(u+b)===47)return a.slice(u+b+1);if(b===0)return a.slice(u+b)}else p>m&&(o.charCodeAt(c+b)===47?E=b:b===0&&(E=0));break}var O=o.charCodeAt(c+b);if(O!==a.charCodeAt(u+b))break;O===47&&(E=b)}var _="";for(b=c+E+1;b<=g;++b)b!==g&&o.charCodeAt(b)!==47||(_.length===0?_+="..":_+="/..");return _.length>0?_+a.slice(u+E):(u+=E,a.charCodeAt(u)===47&&++u,a.slice(u))},_makeLong:function(o){return o},dirname:function(o){if(n(o),o.length===0)return".";for(var a=o.charCodeAt(0),c=a===47,g=-1,p=!0,u=o.length-1;u>=1;--u)if((a=o.charCodeAt(u))===47){if(!p){g=u;break}}else p=!1;return g===-1?c?"/":".":c&&g===1?"//":o.slice(0,g)},basename:function(o,a){if(a!==void 0&&typeof a!="string")throw new TypeError('"ext" argument must be a string');n(o);var c,g=0,p=-1,u=!0;if(a!==void 0&&a.length>0&&a.length<=o.length){if(a.length===o.length&&a===o)return"";var w=a.length-1,m=-1;for(c=o.length-1;c>=0;--c){var E=o.charCodeAt(c);if(E===47){if(!u){g=c+1;break}}else m===-1&&(u=!1,m=c+1),w>=0&&(E===a.charCodeAt(w)?--w==-1&&(p=c):(w=-1,p=m))}return g===p?p=m:p===-1&&(p=o.length),o.slice(g,p)}for(c=o.length-1;c>=0;--c)if(o.charCodeAt(c)===47){if(!u){g=c+1;break}}else p===-1&&(u=!1,p=c+1);return p===-1?"":o.slice(g,p)},extname:function(o){n(o);for(var a=-1,c=0,g=-1,p=!0,u=0,w=o.length-1;w>=0;--w){var m=o.charCodeAt(w);if(m!==47)g===-1&&(p=!1,g=w+1),m===46?a===-1?a=w:u!==1&&(u=1):a!==-1&&(u=-1);else if(!p){c=w+1;break}}return a===-1||g===-1||u===0||u===1&&a===g-1&&a===c+1?"":o.slice(a,g)},format:function(o){if(o===null||typeof o!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof o);return function(a,c){var g=c.dir||c.root,p=c.base||(c.name||"")+(c.ext||"");return g?g===c.root?g+p:g+"/"+p:p}(0,o)},parse:function(o){n(o);var a={root:"",dir:"",base:"",ext:"",name:""};if(o.length===0)return a;var c,g=o.charCodeAt(0),p=g===47;p?(a.root="/",c=1):c=0;for(var u=-1,w=0,m=-1,E=!0,b=o.length-1,O=0;b>=c;--b)if((g=o.charCodeAt(b))!==47)m===-1&&(E=!1,m=b+1),g===46?u===-1?u=b:O!==1&&(O=1):u!==-1&&(O=-1);else if(!E){w=b+1;break}return u===-1||m===-1||O===0||O===1&&u===m-1&&u===w+1?m!==-1&&(a.base=a.name=w===0&&p?o.slice(1,m):o.slice(w,m)):(w===0&&p?(a.name=o.slice(1,u),a.base=o.slice(1,m)):(a.name=o.slice(w,u),a.base=o.slice(w,m)),a.ext=o.slice(u,m)),w>0?a.dir=o.slice(0,w-1):p&&(a.dir="/"),a},sep:"/",delimiter:":",win32:null,posix:null};f.posix=f,i.exports=f}},e={};function t(i){var n=e[i];if(n!==void 0)return n.exports;var l=e[i]={exports:{}};return r[i](l,l.exports,t),l.exports}t.d=(i,n)=>{for(var l in n)t.o(n,l)&&!t.o(i,l)&&Object.defineProperty(i,l,{enumerable:!0,get:n[l]})},t.o=(i,n)=>Object.prototype.hasOwnProperty.call(i,n),t.r=i=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})};var s={};(()=>{var i;if(t.r(s),t.d(s,{URI:()=>E,Utils:()=>J}),typeof process=="object")i=process.platform==="win32";else if(typeof navigator=="object"){var n=navigator.userAgent;i=n.indexOf("Windows")>=0}var l,f,o=(l=function(d,h){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,y){v.__proto__=y}||function(v,y){for(var C in y)Object.prototype.hasOwnProperty.call(y,C)&&(v[C]=y[C])},l(d,h)},function(d,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function v(){this.constructor=d}l(d,h),d.prototype=h===null?Object.create(h):(v.prototype=h.prototype,new v)}),a=/^\w[\w\d+.-]*$/,c=/^\//,g=/^\/\//;function p(d,h){if(!d.scheme&&h)throw new Error('[UriError]: Scheme is missing: {scheme: "", authority: "'.concat(d.authority,'", path: "').concat(d.path,'", query: "').concat(d.query,'", fragment: "').concat(d.fragment,'"}'));if(d.scheme&&!a.test(d.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(d.path){if(d.authority){if(!c.test(d.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(g.test(d.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}var u="",w="/",m=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,E=function(){function d(h,v,y,C,A,x){x===void 0&&(x=!1),typeof h=="object"?(this.scheme=h.scheme||u,this.authority=h.authority||u,this.path=h.path||u,this.query=h.query||u,this.fragment=h.fragment||u):(this.scheme=function(U,W){return U||W?U:"file"}(h,x),this.authority=v||u,this.path=function(U,W){switch(U){case"https":case"http":case"file":W?W[0]!==w&&(W=w+W):W=w}return W}(this.scheme,y||u),this.query=C||u,this.fragment=A||u,p(this,x))}return d.isUri=function(h){return h instanceof d||!!h&&typeof h.authority=="string"&&typeof h.fragment=="string"&&typeof h.path=="string"&&typeof h.query=="string"&&typeof h.scheme=="string"&&typeof h.fsPath=="string"&&typeof h.with=="function"&&typeof h.toString=="function"},Object.defineProperty(d.prototype,"fsPath",{get:function(){return j(this,!1)},enumerable:!1,configurable:!0}),d.prototype.with=function(h){if(!h)return this;var v=h.scheme,y=h.authority,C=h.path,A=h.query,x=h.fragment;return v===void 0?v=this.scheme:v===null&&(v=u),y===void 0?y=this.authority:y===null&&(y=u),C===void 0?C=this.path:C===null&&(C=u),A===void 0?A=this.query:A===null&&(A=u),x===void 0?x=this.fragment:x===null&&(x=u),v===this.scheme&&y===this.authority&&C===this.path&&A===this.query&&x===this.fragment?this:new O(v,y,C,A,x)},d.parse=function(h,v){v===void 0&&(v=!1);var y=m.exec(h);return y?new O(y[2]||u,T(y[4]||u),T(y[5]||u),T(y[7]||u),T(y[9]||u),v):new O(u,u,u,u,u)},d.file=function(h){var v=u;if(i&&(h=h.replace(/\\/g,w)),h[0]===w&&h[1]===w){var y=h.indexOf(w,2);y===-1?(v=h.substring(2),h=w):(v=h.substring(2,y),h=h.substring(y)||w)}return new O("file",v,h,u,u)},d.from=function(h){var v=new O(h.scheme,h.authority,h.path,h.query,h.fragment);return p(v,!0),v},d.prototype.toString=function(h){return h===void 0&&(h=!1),R(this,h)},d.prototype.toJSON=function(){return this},d.revive=function(h){if(h){if(h instanceof d)return h;var v=new O(h);return v._formatted=h.external,v._fsPath=h._sep===b?h.fsPath:null,v}return h},d}(),b=i?1:void 0,O=function(d){function h(){var v=d!==null&&d.apply(this,arguments)||this;return v._formatted=null,v._fsPath=null,v}return o(h,d),Object.defineProperty(h.prototype,"fsPath",{get:function(){return this._fsPath||(this._fsPath=j(this,!1)),this._fsPath},enumerable:!1,configurable:!0}),h.prototype.toString=function(v){return v===void 0&&(v=!1),v?R(this,!0):(this._formatted||(this._formatted=R(this,!1)),this._formatted)},h.prototype.toJSON=function(){var v={$mid:1};return this._fsPath&&(v.fsPath=this._fsPath,v._sep=b),this._formatted&&(v.external=this._formatted),this.path&&(v.path=this.path),this.scheme&&(v.scheme=this.scheme),this.authority&&(v.authority=this.authority),this.query&&(v.query=this.query),this.fragment&&(v.fragment=this.fragment),v},h}(E),_=((f={})[58]="%3A",f[47]="%2F",f[63]="%3F",f[35]="%23",f[91]="%5B",f[93]="%5D",f[64]="%40",f[33]="%21",f[36]="%24",f[38]="%26",f[39]="%27",f[40]="%28",f[41]="%29",f[42]="%2A",f[43]="%2B",f[44]="%2C",f[59]="%3B",f[61]="%3D",f[32]="%20",f);function S(d,h,v){for(var y=void 0,C=-1,A=0;A<d.length;A++){var x=d.charCodeAt(A);if(x>=97&&x<=122||x>=65&&x<=90||x>=48&&x<=57||x===45||x===46||x===95||x===126||h&&x===47||v&&x===91||v&&x===93||v&&x===58)C!==-1&&(y+=encodeURIComponent(d.substring(C,A)),C=-1),y!==void 0&&(y+=d.charAt(A));else{y===void 0&&(y=d.substr(0,A));var U=_[x];U!==void 0?(C!==-1&&(y+=encodeURIComponent(d.substring(C,A)),C=-1),y+=U):C===-1&&(C=A)}}return C!==-1&&(y+=encodeURIComponent(d.substring(C))),y!==void 0?y:d}function P(d){for(var h=void 0,v=0;v<d.length;v++){var y=d.charCodeAt(v);y===35||y===63?(h===void 0&&(h=d.substr(0,v)),h+=_[y]):h!==void 0&&(h+=d[v])}return h!==void 0?h:d}function j(d,h){var v;return v=d.authority&&d.path.length>1&&d.scheme==="file"?"//".concat(d.authority).concat(d.path):d.path.charCodeAt(0)===47&&(d.path.charCodeAt(1)>=65&&d.path.charCodeAt(1)<=90||d.path.charCodeAt(1)>=97&&d.path.charCodeAt(1)<=122)&&d.path.charCodeAt(2)===58?h?d.path.substr(1):d.path[1].toLowerCase()+d.path.substr(2):d.path,i&&(v=v.replace(/\//g,"\\")),v}function R(d,h){var v=h?P:S,y="",C=d.scheme,A=d.authority,x=d.path,U=d.query,W=d.fragment;if(C&&(y+=C,y+=":"),(A||C==="file")&&(y+=w,y+=w),A){var D=A.indexOf("@");if(D!==-1){var re=A.substr(0,D);A=A.substr(D+1),(D=re.lastIndexOf(":"))===-1?y+=v(re,!1,!1):(y+=v(re.substr(0,D),!1,!1),y+=":",y+=v(re.substr(D+1),!1,!0)),y+="@"}(D=(A=A.toLowerCase()).lastIndexOf(":"))===-1?y+=v(A,!1,!0):(y+=v(A.substr(0,D),!1,!0),y+=A.substr(D))}if(x){if(x.length>=3&&x.charCodeAt(0)===47&&x.charCodeAt(2)===58)(z=x.charCodeAt(1))>=65&&z<=90&&(x="/".concat(String.fromCharCode(z+32),":").concat(x.substr(3)));else if(x.length>=2&&x.charCodeAt(1)===58){var z;(z=x.charCodeAt(0))>=65&&z<=90&&(x="".concat(String.fromCharCode(z+32),":").concat(x.substr(2)))}y+=v(x,!0,!1)}return U&&(y+="?",y+=v(U,!1,!1)),W&&(y+="#",y+=h?W:S(W,!1,!1)),y}function L(d){try{return decodeURIComponent(d)}catch{return d.length>3?d.substr(0,3)+L(d.substr(3)):d}}var $=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function T(d){return d.match($)?d.replace($,function(h){return L(h)}):d}var J,F=t(470),ee=function(d,h,v){if(v||arguments.length===2)for(var y,C=0,A=h.length;C<A;C++)!y&&C in h||(y||(y=Array.prototype.slice.call(h,0,C)),y[C]=h[C]);return d.concat(y||Array.prototype.slice.call(h))},q=F.posix||F,te="/";(function(d){d.joinPath=function(h){for(var v=[],y=1;y<arguments.length;y++)v[y-1]=arguments[y];return h.with({path:q.join.apply(q,ee([h.path],v,!1))})},d.resolvePath=function(h){for(var v=[],y=1;y<arguments.length;y++)v[y-1]=arguments[y];var C=h.path,A=!1;C[0]!==te&&(C=te+C,A=!0);var x=q.resolve.apply(q,ee([C],v,!1));return A&&x[0]===te&&!h.authority&&(x=x.substring(1)),h.with({path:x})},d.dirname=function(h){if(h.path.length===0||h.path===te)return h;var v=q.dirname(h.path);return v.length===1&&v.charCodeAt(0)===46&&(v=""),h.with({path:v})},d.basename=function(h){return q.basename(h.path)},d.extname=function(h){return q.extname(h.path)}})(J||(J={}))})(),gt=s})();var{URI:dt,Utils:Fr}=gt;var ge=class extends vt.EventEmitter{constructor(){super(...arguments);this.processes=[]}start(t,s,i,n){let l=i.length,o=k.workspace.getConfiguration("list.source.files").get("filterByName",!1);for(let a of i){let c=(0,mt.spawn)(t,s,{cwd:a});this.processes.push(c),c.on("error",w=>{this.emit("error",w.message)});let g=wt.default.createInterface(c.stdout),p=k.Range.create(0,0,0,0),u=n.length>0;c.stderr.on("data",w=>{console.error(w.toString("utf8"))}),g.on("line",w=>{let m=w;if(m.indexOf(a)<0&&(m=X.default.join(a,w)),u&&n.some(b=>Re(m,b)))return;let E=k.Location.create(k.Uri.file(m).toString(),p);if(!o)this.emit("data",{label:w,sortText:m,location:E});else{let b=X.default.basename(m);this.emit("data",{label:`${b}	${w}`,sortText:m,filterText:b,location:E})}}),g.on("close",()=>{l=l-1,l==0&&this.emit("end")})}}dispose(){for(let t of this.processes)t.killed||t.kill()}},Y=class extends k.BasicList{constructor(t){super(t);this.name="filesMru";this.defaultAction="open";this.description="Search files with a mru list";this.detail="A files finder plugin running at hacked coc.nvim. See: https://github.com/hexh250786313/coc-list-files-mru";this.options=[{name:"-F, -folder",description:"Search files from current workspace folder instead of cwd."},{name:"-W, -workspace",description:"Search files from all workspace folders instead of cwd."}];this.mru=k.workspace.createMru("mru"),this.addLocationActions()}getArgs(t,s){return t.length?t:s}getCommand(){let t=k.workspace.getConfiguration("list.source.files"),s=t.get("command",""),i=t.get("args",[]);if(s)return{cmd:s,args:i};if(ie("rg"))return{cmd:"rg",args:this.getArgs(i,["--color","never","--files"])};if(ie("ag"))return{cmd:"ag",args:this.getArgs(i,["-f","-g",".","--nocolor"])};if(process.platform=="win32")return{cmd:"dir",args:this.getArgs(i,["/a-D","/S","/B"])};if(ie("find"))return{cmd:"find",args:this.getArgs(i,[".","-type","f"])};throw new Error("Unable to find command for files list.")}async loadItems(t){if(t.input.length>0)return this.loadFiles(t);if(t.input.length===0)return this.loadMru(t)}doHighlight(){if(k.workspace.getConfiguration("list.source.files").get("filterByName",!1)){let{nvim:i}=this;i.pauseNotification(),i.command("syntax match CocFilesFile /\\t.*$/ contained containedin=CocFilesLine",!0),i.command("highlight default link CocFilesFile Comment",!0),i.resumeNotification(!1,!0)}}async loadMru(t){let s=t.cwd,i=t.args.indexOf("-A")!==-1,n=await this.mru.load(),f=k.workspace.getConfiguration("list.source.mru").get("filterByName",!1),o=k.Range.create(0,0,0,0);return i||(n=n.filter(a=>pt(s,a))),n.map((a,c)=>{let g=dt.file(a).toString(),p=k.Location.create(g.toString(),o);if(f){let u=X.default.basename(a);return a=i?a:X.default.relative(s,a),{label:`${u}	${a}`,data:{uri:g},sortText:String.fromCharCode(c),filterText:u,location:p}}else return{label:i?a:X.default.relative(s,a),data:{uri:g},sortText:String.fromCharCode(c),location:p}})}async loadFiles(t){let{nvim:s}=this,{window:i,args:n}=t,l=this.parseArguments(n),f=this.getCommand();if(!f)return null;let o=f.args.concat(["-F","-folder","-W","-workspace"]),a=n.filter(m=>o.indexOf(m)==-1),c=[],g=[],p=[];if(l.folder)c=[k.workspace.rootPath];else if(l.workspace)c=k.workspace.workspaceFolders.map(m=>k.Uri.parse(m.uri).fsPath);else{if(a.length>0)for(let m=0;m<a.length;m++){let E=await s.call("expand",a[m]);try{yt.default.lstatSync(E).isDirectory()?g.push(E):p.push(E)}catch{p.push(E)}}g.length>0?c=g:await i.valid?c=[await s.call("getcwd",i.id)]:c=[await s.call("getcwd")]}let u=new ge,w=this.getConfig().get("excludePatterns",[]);return u.start(f.cmd,f.args.concat(p),c,w),u}};async function xr(r){let{subscriptions:e}=r;e.push(oe.listManager.registerList(new Y(oe.workspace.nvim)))}0&&(module.exports={activate});
